{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %} | {{ listing.title }}{% endblock title %}

{% block content %}
<!-- IMAGE GALLERY AND INFORMATION BLOCK -->
<section class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
            <!-- IMAGE GALLERY - MEDIUM / LARGE SCREENS -->
            <section class="container d-none d-md-block">
                <div class="row flex-column align-items-center mt-4">
                    <div class="col">
                        <img
                            src="{{ listing.main_image.url }}"
                            alt=""
                            class="main-house-image rounded"
                        />
                        {% if gallery_images_range|length > 0 %}
                            <div
                                class="row align-items-center"
                                id="house-gallery"
                                data-toggle="modal"
                                data-target="#house-gallery-modal"
                            >
                                {% for gallery_img in listing.listinggalleryimages_set.all %}
                                    <div class="col-12 col-sm-6 col-md-3 mt-4">
                                        <img
                                            src="{{ gallery_img.image.url }}"
                                            alt=""
                                            class="w-100 rounded"
                                            data-target="#house-image"
                                            data-slide-to="{{ forloop.counter0 }}"
                                        />
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </section><!-- IMAGE GALLERY - MEDIUM / LARGE SCREENS -->

            <!-- IMAGE GALLERY - MOBILE / SMALL SCREENS -->
            <section class="container d-block d-md-none">
                <div class="row justify-content-center">
                    <div class="col">
                        {% if gallery_images_range|length == 0 %}
                            <img src="{{ listing.main_image.url }}" class="d-block w-100 rounded" />
                        {% else %}
                            <div
                                id="house-gallery-mobile-indicators"
                                class="carousel slide"
                                data-ride="carousel"
                                data-interval="false"
                            >
                                <ol class="carousel-indicators">
                                    <li
                                        data-target="#house-gallery-mobile-indicators"
                                        data-slide-to="0"
                                        class="active"
                                    ></li>
                                    {% for i in gallery_images_range %}
                                        <li
                                            data-target="#house-gallery-mobile-indicators"
                                            data-slide-to="{{ i|add:1 }}"
                                        ></li>
                                    {% endfor %}
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="{{ listing.main_image.url }}" class="d-block w-100" alt="..." />
                                    </div>
                                    {% for gallery_img in listing.listinggalleryimages_set.all  %}
                                        <div class="carousel-item">
                                            <img
                                                src="{{ gallery_img.image.url }}"
                                                class="d-block w-100"
                                                alt="..."
                                            />
                                        </div>
                                    {% endfor %}
                                </div>
                                <a
                                    class="carousel-control-prev"
                                    href="#house-gallery-mobile-indicators"
                                    role="button"
                                    data-slide="prev"
                                >
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a
                                    class="carousel-control-next"
                                    href="#house-gallery-mobile-indicators"
                                    role="button"
                                    data-slide="next"
                                >
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </section><!-- IMAGE GALLERY - MOBILE / SMALL SCREENS -->
        </div>
        <div class="col-12 col-lg-4 mt-4">
            <h2 class="text-secondary">
                {{ listing.title }}
            </h2>
            <p>
                {{ listing.description }}
            </p>
        </div>
    </div>
</section><!-- IMAGE GALLERY AND INFORMATION BLOCK -->

<!-- INFO BLOCK -->
<section class="container my-4 py-3">
    <div class="row justify-content-center">
        <div
            class="col-10 col-lg-4 bg-light d-flex flex-column align-items-center py-4 mb-4"
        >
            <h5>RENT</h5>
            <h2>${{ listing.monthly_rent|intcomma }}</h2>
            <p class="mb-4">
                Available <span class="text-uppercase">Now</span>
            </p>
            <div class="row justify-content-between mb-4 w-100">
                <div
                    class="col-4 d-flex flex-column align-items-center mb-3"
                >
                    <i class="fas fa-bed text-muted"></i>{{ listing.bedrooms }} beds
                </div>
                <div
                    class="col-4 d-flex flex-column align-items-center mb-3"
                >
                    <i class="fas fa-bath text-muted"></i>{{ listing.bathrooms }} baths
                </div>
                <div
                    class="col-4 d-flex flex-column align-items-center mb-3"
                >
                    <i class="fas fa-ruler-combined text-muted"></i>{{ listing.square_feet }}
                    sq ft
                </div>
            </div>
            <a href="#" class="btn btn-secondary btn-block mb-2"
                ><i class="fas fa-check-circle mr-2"></i>Apply Now</a
            >
            <a href="#" class="btn btn-primary btn-block mb-2"
                ><i class="fas fa-envelope mr-2"></i>Contact Us</a
            >
            <div
                class="d-flex flex-column align-items-start mt-4 w-100"
            >
                <h4>Terms</h4>
                <ul>
                    <li>Rent: ${{ listing.monthly_rent|intcomma }}</li>
                    <li>Security Deposit: ${{ listing.security_deposit|intcomma }}</li>
                </ul>
                <h4>Pet Policy</h4>
                <ul>
                    <li>Cats Allowed</li>
                    <li>Dogs Allowed</li>
                </ul>
                <p class="mt-3">
                    <span class="font-weight-bold">Contact Us: </span
                    >(662) 238-3353
                </p>
                <div class="row">
                    <div class="col flex-column">
                        <p class="font-weight-bold">
                            Share this listing:
                            <span class="h4">
                                <i class="fab fa-facebook mx-2"></i>
                                <i class="fab fa-twitter mr-2"></i>
                                <i class="fab fa-pinterest mr-2"></i>
                                <i class="fas fa-envelope"></i>
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-10 col-lg-8">
            <img src="img/map.png" alt="" class="map-image" />
        </div>
    </div>
</section><!-- INFO BLOCK -->
{% endblock content %}